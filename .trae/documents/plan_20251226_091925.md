# 番茄小说自动更新工具开发计划

## 一、现状分析

### 1. 番茄作家平台API情况
- 番茄作家工作平台没有公开的API接口文档
- 第三方SDK主要用于应用内部功能实现，而非开放给开发者
- 存在第三方提供的非官方API服务，但使用风险较高

### 2. 用户需求
- 希望能更高效地管理小说内容
- 希望能方便地将小说更新到番茄作家后台
- 希望能在项目内实现相关功能

## 二、开发方案

由于无法直接访问番茄作家后台API，我将开发一个本地小说管理工具，帮助用户管理小说内容并方便手动更新到番茄作家后台。

### 1. 核心功能

#### （1）小说章节管理
- 章节的增删改查
- 章节状态管理（草稿、已发布、已删除）
- 章节排序与分类

#### （2）内容编辑与格式转换
- Markdown格式编辑支持
- 自动转换为番茄作家后台支持的格式
- 自动生成章节标题、字数统计等信息

#### （3）更新管理
- 记录已发布章节
- 生成更新日志
- 提供番茄作家后台更新指南

### 2. 技术架构

#### （1）文件结构
```
九龙修真记/
├── md/                    # 原有的Markdown章节文件
│   ├── 章节/
│   │   └── 正传/
│   └── 设定/
├── tools/                 # 新增的工具目录
│   ├── fanqie-updater/   # 番茄小说更新工具
│   │   ├── config.js      # 配置文件
│   │   ├── index.js       # 主程序
│   │   ├── utils/         # 工具函数
│   │   │   ├── chapter.js  # 章节管理
│   │   │   ├── format.js   # 格式转换
│   │   │   └── update.js   # 更新管理
│   │   └── package.json   # 依赖管理
│   └── README.md          # 工具使用说明
└── package.json           # 项目依赖
```

#### （2）技术栈
- Node.js：跨平台运行环境
- Markdown-it：Markdown解析与渲染
- Inquirer.js：交互式命令行工具
- Chalk：命令行彩色输出

### 3. 开发步骤

#### （1）创建工具目录结构
- 创建tools/fanqie-updater目录
- 初始化package.json
- 安装必要依赖

#### （2）实现配置模块
- 小说基本信息配置（书名、作者、分类等）
- 番茄作家后台信息配置
- 章节目录配置

#### （3）实现章节管理模块
- 读取原有Markdown章节文件
- 章节的增删改查功能
- 章节状态管理

#### （4）实现格式转换模块
- Markdown到HTML的转换
- 字数统计
- 章节标题格式化

#### （5）实现更新管理模块
- 记录已发布章节
- 生成更新日志
- 提供更新指南

#### （6）实现命令行界面
- 交互式菜单
- 章节管理命令
- 格式转换命令
- 更新管理命令

#### （7）编写使用说明
- 工具安装说明
- 功能使用指南
- 番茄作家后台更新步骤

### 4. 使用流程

1. **初始化配置**：运行工具，填写小说基本信息和目录配置
2. **管理章节**：使用工具查看、编辑、新增章节
3. **生成更新内容**：选择待发布章节，生成符合番茄格式的内容
4. **手动更新**：按照工具提供的指南，将生成的内容复制到番茄作家后台
5. **记录更新**：工具记录已发布章节，方便下次更新

## 三、预期效果

1. **提高管理效率**：统一管理小说章节，方便编辑和查看
2. **简化更新流程**：自动生成符合番茄格式的内容，减少手动操作
3. **降低出错风险**：自动处理格式转换，避免因格式问题导致的审核不通过
4. **记录更新历史**：方便跟踪章节发布情况
5. **安全可靠**：纯本地工具，不涉及账号密码，保障账号安全

## 四、注意事项

1. **遵守平台规则**：生成的内容需符合番茄小说的平台规则，避免违规内容
2. **手动更新**：工具仅提供辅助功能，最终更新仍需用户手动操作
3. **格式检查**：生成内容后需检查格式是否符合番茄作家后台要求
4. **定期备份**：定期备份小说内容，避免数据丢失

通过这个本地工具，用户可以更高效地管理小说内容，并方便地将内容更新到番茄作家后台，同时保障账号安全和内容合规。